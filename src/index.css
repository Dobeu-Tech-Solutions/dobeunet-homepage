@tailwind base;
@tailwind components;
@tailwind utilities;

/*
  DARK MODE THEMING SYSTEM
  WCAG 2.1 AA Compliant Color System
  - Normal text: 4.5:1 contrast ratio minimum
  - Large text (18pt+): 3:1 contrast ratio minimum
  - All colors tested for accessibility
*/

@layer base {
  :root {
    /* Light Mode Color System */
    --color-bg-primary: 255 255 255; /* #ffffff - white */
    --color-bg-secondary: 248 250 252; /* #f8fafc - slate-50 */
    --color-bg-tertiary: 241 245 249; /* #f1f5f9 - slate-100 */
    --color-bg-elevated: 255 255 255; /* #ffffff - white */

    /* Text colors - WCAG AA compliant */
    --color-text-primary: 15 23 42; /* #0f172a - slate-900, contrast 16.1:1 */
    --color-text-secondary: 51 65 85; /* #334155 - slate-700, contrast 9.7:1 */
    --color-text-tertiary: 100 116 139; /* #64748b - slate-500, contrast 4.6:1 */
    --color-text-inverse: 255 255 255; /* #ffffff - white */

    /* Border colors */
    --color-border-primary: 226 232 240; /* #e2e8f0 - slate-200 */
    --color-border-secondary: 203 213 225; /* #cbd5e1 - slate-300 */
    --color-border-focus: 6 182 212; /* #06b6d4 - cyan-500 */

    /* Brand colors - Cyan/Blue theme */
    --color-brand-primary: 6 182 212; /* #06b6d4 - cyan-500 */
    --color-brand-primary-hover: 8 145 178; /* #0891b2 - cyan-600 */
    --color-brand-secondary: 37 99 235; /* #2563eb - blue-600 */
    --color-brand-secondary-hover: 29 78 216; /* #1d4ed8 - blue-700 */

    /* Semantic colors */
    --color-success: 22 163 74; /* #16a34a - green-600, contrast 4.5:1 */
    --color-success-bg: 220 252 231; /* #dcfce7 - green-100 */
    --color-error: 220 38 38; /* #dc2626 - red-600, contrast 5.9:1 */
    --color-error-bg: 254 226 226; /* #fee2e2 - red-100 */
    --color-warning: 202 138 4; /* #ca8a04 - yellow-600, contrast 4.5:1 */
    --color-warning-bg: 254 249 195; /* #fef9c3 - yellow-100 */

    /* Interactive states */
    --color-overlay: 0 0 0; /* #000000 for modal overlays */
    --opacity-overlay: 0.5;

    /* Transition timing */
    --transition-duration: 200ms;
    --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /*
    Dark Mode Color System
    Activated via data-theme="dark" on root element
    All colors maintain WCAG AA contrast ratios against dark backgrounds
  */
  [data-theme="dark"] {
    /* Dark Mode Backgrounds */
    --color-bg-primary: 15 23 42; /* #0f172a - slate-900 */
    --color-bg-secondary: 30 41 59; /* #1e293b - slate-800 */
    --color-bg-tertiary: 51 65 85; /* #334155 - slate-700 */
    --color-bg-elevated: 30 41 59; /* #1e293b - slate-800 */

    /* Dark Mode Text - WCAG AA compliant on dark backgrounds */
    --color-text-primary: 248 250 252; /* #f8fafc - slate-50, contrast 15.5:1 */
    --color-text-secondary: 226 232 240; /* #e2e8f0 - slate-200, contrast 11.8:1 */
    --color-text-tertiary: 203 213 225; /* #cbd5e1 - slate-300, improved contrast 7.1:1 */
    --color-text-inverse: 15 23 42; /* #0f172a - slate-900 */

    /* Dark Mode Borders */
    --color-border-primary: 51 65 85; /* #334155 - slate-700 */
    --color-border-secondary: 71 85 105; /* #475569 - slate-600 */
    --color-border-focus: 34 211 238; /* #22d3ee - cyan-400 */

    /* Dark Mode Brand Colors - Adjusted for dark backgrounds */
    --color-brand-primary: 34 211 238; /* #22d3ee - cyan-400, contrast 8.3:1 */
    --color-brand-primary-hover: 6 182 212; /* #06b6d4 - cyan-500 */
    --color-brand-secondary: 96 165 250; /* #60a5fa - blue-400, contrast 6.2:1 */
    --color-brand-secondary-hover: 59 130 246; /* #3b82f6 - blue-500 */

    /* Dark Mode Semantic Colors */
    --color-success: 74 222 128; /* #4ade80 - green-400, contrast 7.5:1 */
    --color-success-bg: 22 101 52; /* #166534 - green-800 */
    --color-error: 248 113 113; /* #f87171 - red-400, contrast 5.6:1 */
    --color-error-bg: 127 29 29; /* #7f1d1d - red-900 */
    --color-warning: 250 204 21; /* #facc15 - yellow-400, contrast 11.7:1 */
    --color-warning-bg: 113 63 18; /* #713f12 - yellow-900 */

    /* Dark Mode Overlay */
    --color-overlay: 0 0 0;
    --opacity-overlay: 0.7;
  }

  /*
    System Preference Detection
    Respects user's OS-level dark mode preference
    Only applies if no manual preference is set
  */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
      --color-bg-primary: 15 23 42;
      --color-bg-secondary: 30 41 59;
      --color-bg-tertiary: 51 65 85;
      --color-bg-elevated: 30 41 59;

      --color-text-primary: 248 250 252;
      --color-text-secondary: 226 232 240;
      --color-text-tertiary: 148 163 184;
      --color-text-inverse: 15 23 42;

      --color-border-primary: 51 65 85;
      --color-border-secondary: 71 85 105;
      --color-border-focus: 34 211 238;

      --color-brand-primary: 34 211 238;
      --color-brand-primary-hover: 6 182 212;
      --color-brand-secondary: 96 165 250;
      --color-brand-secondary-hover: 59 130 246;

      --color-success: 74 222 128;
      --color-success-bg: 22 101 52;
      --color-error: 248 113 113;
      --color-error-bg: 127 29 29;
      --color-warning: 250 204 21;
      --color-warning-bg: 113 63 18;

      --color-overlay: 0 0 0;
      --opacity-overlay: 0.7;
    }
  }

  /*
    Smooth Transitions
    Applies to theme changes for visual polish
    Uses reduced motion for accessibility
  */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-duration: var(--transition-duration);
    transition-timing-function: var(--transition-timing);
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition-duration: 0.01ms !important;
      animation-duration: 0.01ms !important;
    }
  }

  /* Base body styling with theme variables */
  body {
    background-color: rgb(var(--color-bg-primary));
    color: rgb(var(--color-text-primary));
    font-size: 16px;
    line-height: 1.6;
    letter-spacing: 0.015em;
  }

  /* Enhanced typography for readability */
  p {
    margin-bottom: 1.5em;
    line-height: 1.6;
    word-spacing: 0.05em;
  }

  /* Heading spacing for better hierarchy */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-bottom: 0.75em;
  }

  /* Skip to main content link for accessibility */
  .skip-to-main {
    position: absolute;
    top: -40px;
    left: 0;
    background: rgb(var(--color-brand-primary));
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    z-index: 100;
    border-radius: 0 0 4px 0;
  }

  .skip-to-main:focus {
    top: 0;
  }

  /* Enhanced focus indicators for keyboard navigation */
  *:focus-visible {
    outline: 3px solid rgb(var(--color-border-focus));
    outline-offset: 2px;
    border-radius: 4px;
  }

  /* Ensure minimum touch target size */
  button,
  a {
    min-height: 44px;
    min-width: 44px;
  }
}

/*
  Utility Classes for Theme Colors
  Can be used throughout the application
*/
@layer utilities {
  .bg-primary {
    background-color: rgb(var(--color-bg-primary));
  }

  .bg-secondary {
    background-color: rgb(var(--color-bg-secondary));
  }

  .bg-tertiary {
    background-color: rgb(var(--color-bg-tertiary));
  }

  .bg-elevated {
    background-color: rgb(var(--color-bg-elevated));
  }

  .text-primary {
    color: rgb(var(--color-text-primary));
  }

  .text-secondary {
    color: rgb(var(--color-text-secondary));
  }

  .text-tertiary {
    color: rgb(var(--color-text-tertiary));
  }

  .border-primary {
    border-color: rgb(var(--color-border-primary));
  }

  .border-secondary {
    border-color: rgb(var(--color-border-secondary));
  }

  .brand-primary {
    color: rgb(var(--color-brand-primary));
  }

  .bg-brand-primary {
    background-color: rgb(var(--color-brand-primary));
  }

  /* Scroll animation utilities */
  .fade-in {
    animation: fadeIn 0.6s ease-out forwards;
    opacity: 0;
  }

  .slide-up {
    animation: slideUp 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(30px);
  }

  @keyframes fadeIn {
    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Stagger animation delays */
  .delay-100 {
    animation-delay: 100ms;
  }
  .delay-200 {
    animation-delay: 200ms;
  }
  .delay-300 {
    animation-delay: 300ms;
  }
  .delay-400 {
    animation-delay: 400ms;
  }
  .delay-500 {
    animation-delay: 500ms;
  }

  /* Toast and notification animations */
  .animate-slide-in {
    animation: slideInRight 0.3s ease-out forwards;
  }

  .animate-slide-down {
    animation: slideDown 0.3s ease-out forwards;
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideDown {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Loading skeleton animation */
  .animate-pulse-slow {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
}
